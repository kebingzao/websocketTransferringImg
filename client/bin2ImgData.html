<!DOCTYPE>
<html>
<head>
    <title>将比特字节字符串转化为图片资源</title>
    <meta charset="UTF-8">

    <script type="application/javascript">
        // 将字符串转为字节数组
        function string2Bin(str) {
            var result = [];
            for (var i = 0; i < str.length; i++) {
                result.push(str.charCodeAt(i));
            }
            return result;
        }
        // 将字节数组转为字符串
        function bin2String(array) {
            return String.fromCharCode.apply(String, array);
        }

        function $(str){
            return document.getElementById(str);
        }
        window.onload = function(){
            $("done").onclick = function(){
                var str = $("str").value;
                // 转化为字节数组
                var arr = str.split(",");
                // 将字节数组转化为字符串
                var bin2Str = bin2String(arr);
                // 这时候会发现是乱码
                $("value").innerHTML = bin2Str;
                // 这时候转为图片
                var arrLength = arr.length;
                // 转化为二进制格式
                var uint8Array  = new Uint8Array(arr);
                var arrayBuffer = uint8Array.buffer;
                var blob        = new Blob([arrayBuffer]);
                var reader = new FileReader();
                reader.onload = function(evt){
                    if(evt.target.readyState == FileReader.DONE){
                        var url = evt.target.result;
                        alert(url);
                        var img = document.getElementById("imgDiv");
                        img.innerHTML = "<img src = " + url + " />";
                    }
                };
                reader.readAsDataURL(blob);
            }
        }
    </script>
</head>
<body>
<div>字节数组连起来的字符串：（这一次是图片数据）</div>
<textarea id="str" rows="10" cols="100">
255,216,255,224,0,16,74,70,73,70,0,1,1,0,0,1,0,1,0,0,255,219,0,67,0,20,14,15,18,15,13,20,18,16,18,23,21,20,24,30,50,33,30,28,28,30,61,44,46,36,50,73,64,76,75,71,64,70,69,80,90,115,98,80,85,109,86,69,70,100,136,101,109,119,123,129,130,129,78,96,141,151,140,125,150,115,126,129,124,255,219,0,67,1,21,23,23,30,26,30,59,33,33,59,124,83,70,83,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,255,192,0,17,8,0,16,0,3,3,1,34,0,2,17,1,3,17,1,255,196,0,31,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,16,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250,255,196,0,31,1,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,255,196,0,181,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250,255,218,0,12,3,1,0,2,17,3,17,0,63,0,229,245,87,146,77,74,118,154,221,109,164,206,26,37,24,11,129,138,43,99,90,214,109,37,213,110,30,40,86,100,200,1,255,0,189,128,7,244,162,128,63,255,217,</textarea>
<button id="done">转化为字符串</button>
<div>转化为字符串的内容是:</div>
<div id="value"></div>
<div id="imgDiv"></div>
</body>
</html>